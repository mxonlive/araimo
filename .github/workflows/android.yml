name: ЁЯзи Factory Reset (Delete Everything)

on: 
  workflow_dispatch: # ржПржЯрж┐ ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓рж┐ рж░рж╛ржи ржХрж░рждрзЗ рж╣ржмрзЗ

permissions:
  contents: write # ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛рж░ ржкрж╛рж░ржорж┐рж╢ржи

jobs:
  clean-repo:
    name: Wiping Project Clean
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3

      - name: Delete Generated Folders
        run: |
          echo "Starting Cleanup Process..."
          
          # рзз. рж╕ржм ржкрзНрж▓рж╛ржЯржлрж░рзНржо ржлрзЛрж▓рзНржбрж╛рж░ ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ
          rm -rf android ios web macos windows linux
          
          # рзи. ржЯрзЗржорзНржкрзЛрж░рж╛рж░рж┐ ржлрзЛрж▓рзНржбрж╛рж░ ржбрж┐рж▓рж┐ржЯ
          rm -rf build .dart_tool .idea
          
          # рзй. ржЖржЗржХржи ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржлрж╛ржЗрж▓ ржбрж┐рж▓рж┐ржЯ (ржпржжрж┐ ржерж╛ржХрзЗ)
          rm -f android/app/src/main/res/mipmap-*/ic_launcher.png
          
          echo "All generated folders deleted successfully."

      - name: Commit and Push Changes
        run: |
          git config --global user.name "Adiba 2.0 Auto-Cleaner"
          git config --global user.email "adiba@bot.com"
          
          git add .
          
          # ржпржжрж┐ ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛рж░ ржорждрзЛ ржХрж┐ржЫрзБ ржерж╛ржХрзЗ рждржмрзЗржЗ ржкрзБрж╢ ржХрж░ржмрзЗ
          git commit -m "ЁЯзи Factory Reset: Deleted old Android/iOS folders" || echo "Nothing to delete"
          git push
